
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../kerberos/Keytab_introduction/">
      
      
        <link rel="next" href="../../ldap/01.install_ldap/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Install_keycloak - Pengfei Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#install-keycloak-on-debian-11" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Pengfei Documentation" class="md-header__button md-logo" aria-label="Pengfei Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pengfei Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Install_keycloak
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Pengfei Documentation" class="md-nav__button md-logo" aria-label="Pengfei Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Pengfei Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    admin_sys
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    admin_sys
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    core
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    core
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/core/Systemd%28serviced%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    systemd(serviced) in linux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    db_management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    db_management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_2_1" id="__nav_2_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    mariadb
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    mariadb
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/db_management/mariadb/Installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/db_management/mariadb/Management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2_2" id="__nav_2_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    postgres
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    postgres
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/db_management/postgres/Install_postgresql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    os_setup
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    os_setup
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/01.Lang_support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    server language support
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/02.Add_debian_backports_repo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    debian backports repo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/03.Remote_Desktop_access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    debian server rdp access
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/05.Debian_security_update_automation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    debian server security update automation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/06.Accept_private_ca_certificate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    debian server accept private ca cert
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/07.Setup_shared_folder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configure a shared folder in debian
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/08.Debian_upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migrate debian 11 to 13
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/Install_configure_Postfix_to_sendmail/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Use postfix to sendmail
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_9" >
        
          
          <label class="md-nav__link" for="__nav_2_3_9" id="__nav_2_3_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    auto_config
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    auto_config
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_9_1" >
        
          
          <label class="md-nav__link" for="__nav_2_3_9_1" id="__nav_2_3_9_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ansible
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_9_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_9_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    ansible
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/auto_config/ansible/ansible_roles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ansible roles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_10" >
        
          
          <label class="md-nav__link" for="__nav_2_3_10" id="__nav_2_3_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    package_management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    package_management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/package_management/01.Install_deb_files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    install package via deb files
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/package_management/02.Use_private_repo_in_debian/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    use private package repo in debian
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_11" >
        
          
          <label class="md-nav__link" for="__nav_2_3_11" id="__nav_2_3_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Summary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/security/01.Configure_ssh_local_account/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configure_ssh_local_account
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/security/02.Configure_ssh_pam_ldap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configure_ssh_pam_ldap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/security/03.Configure_ssh_sssd_ldap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configure ssh sssd ldap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/security/04.Configure_ssh_pam_sssd_ad_en/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configure_ssh_sssd_ad
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/security/05.Static_uid_gid_integration_in_sssd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Static_uid_gid_integration_in_sssd
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/os_setup/security/06.Configure_ssh_sssd_kerberos_linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configure_ssh_sssd_kerberos_linux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    other_services
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    other_services
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/other_services/build_openssl_tool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    build_openssl_tool
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/other_services/install_gitlab_ce/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    install_gitlab_ce
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/other_services/install_vscode_server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    install_vscode_server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4_4" id="__nav_2_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Nginx
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Nginx
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/other_services/Nginx/01.Install_Nginx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/other_services/Nginx/02.Enable_https_resolution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Enable_https_and_auto_redirect
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../adminsys/other_services/Nginx/03.Use_Nginx_as_Http_load_balancer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Use_nginx_as_load_balancer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    container
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    container
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Containerd
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Containerd
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/Containerd/01.Introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/Containerd/02.Install_config_containerd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Docker and Docker compose
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Docker and Docker compose
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/Docker/01.Install_docker_dockerCompose/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/Docker/02.Use_docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Use docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/Docker/03.Use_docker_compose/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Use docker compose
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/Helm_chart_registry/01.Deploy_a_helm_chart_registry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    helm chart registry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    container image registry
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    container image registry
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_1" >
        
          
          <label class="md-nav__link" for="__nav_3_4_1" id="__nav_3_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    harbor
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    harbor
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/Image_registry/harbor/01.Introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/Image_registry/harbor/02.Harbor_installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Harbor installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/Image_registry/harbor/03.Harbor_helm_chart_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Harbor helm chart management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/Image_registry/04.Use_private_image_registry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configure container runtime to use private image registry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    k8s
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    k8s
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5_1" >
        
          
          <label class="md-nav__link" for="__nav_3_5_1" id="__nav_3_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    deploy_k8s_with_kubeadm
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    deploy_k8s_with_kubeadm
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/k8s/deploy_k8s_with_kubeadm/01.Introduction_of_Kubeadm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction of kubeadm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/k8s/deploy_k8s_with_kubeadm/02.Deploy_k8s_cluster_online/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deploy k8s with kubeadm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/k8s/deploy_k8s_with_kubeadm/03.K8s_cluster_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Manage k8s with kubeadm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/k8s/deploy_k8s_with_kubeadm/04.Post_k8s_cluster_installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Post installation config
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5_2" >
        
          
          <label class="md-nav__link" for="__nav_3_5_2" id="__nav_3_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    k8s_client_setup
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    k8s_client_setup
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/k8s/k8s_client_setup/01.Install_kubectl_and_helm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install kubectl and helm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/k8s/k8s_client_setup/02.Helm_introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction of helm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/k8s/k8s_client_setup/03.Helm_use_private_repo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configure helm client to use private repo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5_3" >
        
          
          <label class="md-nav__link" for="__nav_3_5_3" id="__nav_3_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    k8s_security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    k8s_security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/k8s/k8s_security/01.K8s_security_best_practices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    k8s security best practices
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/k8s/k8s_security/06.k8s_security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    k8s network security
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/k8s/01.Introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction of k8s
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/k8s/04.Managing_k8s_certificate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Managing k8s certificate
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/k8s/05.k8s_cluster_supervision/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    K8s_cluster_supervision
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/k8s/Debug_application_in_cluster_k8s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Debug_deployed_app_in_k8s
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../container/k8s/k8s_cluster_upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    k8s_cluster_upgrade
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    data_management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    data_management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../data_management/tuning.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tuning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../data_management/faq.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    dev_ops
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    dev_ops
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../devops/install.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../devops/config.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    hadoop
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    hadoop
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hadoop/Integrate_kerberos_in_hadoop_cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Integrate kerberos in hadoop cluster
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_1" >
        
          
          <label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Kerberos
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Kerberos
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kerberos/01.Introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    01.Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kerberos/02.Install_kerberos_server_client_for_debian_server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    02.Install_kerberos_client_server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kerberos/03.Configure_kerberos_to_use_ldap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    03.Configure_kerberos_to_use_ldap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kerberos/04.Install_kerberos_server_client_for_windows_server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    04.Install_kerberos_server_client_for_windows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kerberos/05.Configure_sssd_to_use_static_uid_gid/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    05.Configure_sssd_to_use_static_uid_gid
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kerberos/Keytab_introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    06.Keytab_introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" checked>
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    keycloak
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    keycloak
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Install_keycloak
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Install_keycloak
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-0-prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 0 : Prerequisites
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 0 : Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-user-account" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create user account
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-jdk" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install jdk
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-installing-and-starting-the-keycloak-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Installing and starting the Keycloak server
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 1: Installing and starting the Keycloak server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-en-mode-bare-metal" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installation en mode bare metal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-en-mode-docker-image" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installation en mode docker image
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step2-starting-the-keycloak-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step2: Starting the keycloak server
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step2: Starting the keycloak server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#in-development-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        In development mode
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-production-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        In production mode
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-the-initial-admin-user" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating the initial admin user
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimize-the-keycloak-startup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Optimize the Keycloak startup
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step3-connection-the-admin-cli" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step3 : Connection the admin CLI
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step3-creating-a-systemd-service-file-for-keycloak" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step3: Creating a SystemD Service File for Keycloak
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step3: Creating a SystemD Service File for Keycloak">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-directory-for-keycloak" class="md-nav__link">
    <span class="md-ellipsis">
      
        configuration directory for Keycloak
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-systemd-service-for-keycloak" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create a systemd service for keycloak
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-a-reverse-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Set a reverse proxy
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-the-keycloak-service" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing the keycloak service
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing the keycloak service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-up-keycloak-client" class="md-nav__link">
    <span class="md-ellipsis">
      
        Set up keycloak client
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-an-access-token" class="md-nav__link">
    <span class="md-ellipsis">
      
        Get an access token
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-user-access-token" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verify User access token
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-postman-to-test-the-above-request" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use postman to test the above request
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshoot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshoot
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshoot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#css-loading-issue-after-hosting-keycloak-on-linux-with-nginx-as-proxy-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        CSS loading issue after hosting keycloak on linux with nginx as proxy server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cors-header-access-control-allow-origin-missing" class="md-nav__link">
    <span class="md-ellipsis">
      
        CORS header 'Access-Control-Allow-Origin' missing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bash-script-to-test-authorization-code-grant-of-keycloak" class="md-nav__link">
    <span class="md-ellipsis">
      
        Bash script to test Authorization Code grant of Keycloak
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" >
        
          
          <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ldap
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    ldap
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ldap/01.install_ldap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install_ldap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-0-prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 0 : Prerequisites
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 0 : Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-user-account" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create user account
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-jdk" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install jdk
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-installing-and-starting-the-keycloak-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Installing and starting the Keycloak server
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 1: Installing and starting the Keycloak server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-en-mode-bare-metal" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installation en mode bare metal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-en-mode-docker-image" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installation en mode docker image
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step2-starting-the-keycloak-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step2: Starting the keycloak server
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step2: Starting the keycloak server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#in-development-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        In development mode
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-production-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        In production mode
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-the-initial-admin-user" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating the initial admin user
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimize-the-keycloak-startup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Optimize the Keycloak startup
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step3-connection-the-admin-cli" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step3 : Connection the admin CLI
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step3-creating-a-systemd-service-file-for-keycloak" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step3: Creating a SystemD Service File for Keycloak
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step3: Creating a SystemD Service File for Keycloak">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-directory-for-keycloak" class="md-nav__link">
    <span class="md-ellipsis">
      
        configuration directory for Keycloak
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-systemd-service-for-keycloak" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create a systemd service for keycloak
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-a-reverse-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Set a reverse proxy
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-the-keycloak-service" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing the keycloak service
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing the keycloak service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-up-keycloak-client" class="md-nav__link">
    <span class="md-ellipsis">
      
        Set up keycloak client
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-an-access-token" class="md-nav__link">
    <span class="md-ellipsis">
      
        Get an access token
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-user-access-token" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verify User access token
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-postman-to-test-the-above-request" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use postman to test the above request
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshoot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshoot
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshoot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#css-loading-issue-after-hosting-keycloak-on-linux-with-nginx-as-proxy-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        CSS loading issue after hosting keycloak on linux with nginx as proxy server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cors-header-access-control-allow-origin-missing" class="md-nav__link">
    <span class="md-ellipsis">
      
        CORS header 'Access-Control-Allow-Origin' missing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bash-script-to-test-authorization-code-grant-of-keycloak" class="md-nav__link">
    <span class="md-ellipsis">
      
        Bash script to test Authorization Code grant of Keycloak
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="install-keycloak-on-debian-11">Install keycloak on debian 11<a class="headerlink" href="#install-keycloak-on-debian-11" title="Permanent link">&para;</a></h1>
<p>This tutorial shows how to install and config a keycloak server in a scripted manner. The objective is: </p>
<ul>
<li>enable installation automation without K8s cluster</li>
<li>enable the usage of variables for supporting various environments</li>
<li>enable idempotence (the script can be executed multiple times producing the same results)</li>
</ul>
<p>You can find the official doc https://www.keycloak.org/documentation.html</p>
<blockquote>
<p>Keycloak Operator can only be used in a Kubernetes based runtime.</p>
</blockquote>
<p>We will follow below key Steps 
1. Installing and starting the Keycloak server
2. Connecting the Admin CLI
3. Configuring</p>
<h2 id="step-0-prerequisites">Step 0 : Prerequisites<a class="headerlink" href="#step-0-prerequisites" title="Permanent link">&para;</a></h2>
<h3 id="create-user-account">Create user account<a class="headerlink" href="#create-user-account" title="Permanent link">&para;</a></h3>
<p>For good practice, we should run the <code>keycloak.service</code> with a service account(e.g. specific User and Group). 
In this tutorial, we decide to use <code>keycloak</code> as the username and group name.</p>
<p>You can create the user and group using the <code>groupadd and useradd</code> commands. The following example creates the user, group, 
and working directory for keycloak. These commands typically requires root (sudo) permissions.</p>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>groupadd<span class="w"> </span>-r<span class="w"> </span>keycloak

sudo<span class="w"> </span>useradd<span class="w"> </span>-r<span class="w"> </span>-g<span class="w"> </span>keycloak<span class="w"> </span>-d<span class="w"> </span>/opt/keycloak<span class="w"> </span>-s<span class="w"> </span>/sbin/nologin<span class="w"> </span>keycloak

sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/opt/keycloak

<span class="c1"># change the owner of the data folder</span>
sudo<span class="w"> </span>chown<span class="w"> </span>keycloak:keycloak<span class="w"> </span>/opt/keycloak
</code></pre></div>

<h3 id="install-jdk">Install jdk<a class="headerlink" href="#install-jdk" title="Permanent link">&para;</a></h3>
<p>Keycloak requires Java to work. You can check and verify that Java is installed with the following command.
Base on the keycloak version, you need to install the required jdk version.
In this tutorial, for keycloak 23.0.4, we use jdk-17</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># check if java installed</span>
java<span class="w"> </span>-version

<span class="c1"># install jdk 17 (debian 11)</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>openjdk-17-jdk
</code></pre></div>

<h2 id="step-1-installing-and-starting-the-keycloak-server">Step 1: Installing and starting the Keycloak server<a class="headerlink" href="#step-1-installing-and-starting-the-keycloak-server" title="Permanent link">&para;</a></h2>
<p>We can install the keycloak en mode:
- bare metal
- container(e.g. docker, k8s, etc.)</p>
<h3 id="installation-en-mode-bare-metal">Installation en mode bare metal<a class="headerlink" href="#installation-en-mode-bare-metal" title="Permanent link">&para;</a></h3>
<p>Download of the Keycloak distribution.</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># fix the kc version which you want to download</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">KC_VERSION</span><span class="o">=</span><span class="m">23</span>.0.4
curl<span class="w"> </span>-LO<span class="w">  </span>https://github.com/keycloak/keycloak/releases/download/<span class="s2">&quot;</span><span class="si">${</span><span class="nv">KC_VERSION</span><span class="si">}</span><span class="s2">&quot;</span>/keycloak-<span class="s2">&quot;</span><span class="si">${</span><span class="nv">KC_VERSION</span><span class="si">}</span><span class="s2">&quot;</span>.zip

<span class="c1"># copy the bin into the working directory</span>
sudo<span class="w"> </span>mv<span class="w"> </span>keycloak-<span class="si">${</span><span class="nv">KC_VERSION</span><span class="si">}</span>.zip<span class="w"> </span>/opt/keycloak

<span class="c1"># unpacking the archive.</span>
unzip<span class="w"> </span>keycloak-<span class="si">${</span><span class="nv">KC_VERSION</span><span class="si">}</span>.zip

<span class="c1"># </span>
<span class="nb">cd</span><span class="w"> </span>keycloak-<span class="si">${</span><span class="nv">KC_VERSION</span><span class="si">}</span>

<span class="c1"># add execute acl on bin folder</span>
sudo<span class="w"> </span>chmod<span class="w"> </span>o+x<span class="w"> </span>bin

<span class="c1"># This directory contains a Keycloak Quarkus application.</span>
<span class="c1"># When we start the server for the first time, we have to set the admin user and the admin password:</span>
<span class="c1"># You can notice all the config is done by setting env var not in a config file. Because it&#39;s designed with cloud native</span>
<span class="nv">KEYCLOAK_ADMIN</span><span class="o">=</span>admin<span class="w"> </span><span class="nv">KEYCLOAK_ADMIN_PASSWORD</span><span class="o">=</span>YVqs7p4bJaim3rQ2FSI8<span class="w"> </span>./bin/kc.sh<span class="w"> </span>start-dev

<span class="c1"># When we start again, it is not necessary to set these variables, again. You can start the server with:</span>
./bin/kc.sh<span class="w"> </span>start-dev

<span class="c1"># start-dev runs the quarkus application in DEV-mode. Do not use this for Production.</span>
<span class="c1"># By default, the Keycloak server is using the following ports. They are only served from the localhost loopback address 127.0.0.1:</span>
<span class="c1"># 8080 for Keycloak using HTTP</span>
<span class="c1"># One of the last lines from the log output is:</span>
<span class="c1"># 2023-04-11 13:23:29,545 INFO  [io.quarkus] (main) Keycloak 21.0.2 on JVM (powered by Quarkus 2.13.7.Final) started in 4.418s. Listening on: http://0.0.0.0:8080</span>
<span class="c1"># </span>
</code></pre></div>

<blockquote>
<p>We can now open the Administration Console from localhost and do the login with the just created admin user.</p>
</blockquote>
<p>The distribution also contains the <code>Admin CLI</code>. This is the shell script <strong>./bin/kcadm.sh</strong>.</p>
<p>We define the <code>environment variable KCADM for the kcadm.sh</code> script. </p>
<div class="codehilite"><pre><span></span><code><span class="c1"># It must be the absolute path to the </span>
<span class="c1"># kcadm.sh script from the above Keycloak installation.</span>
<span class="c1"># general form</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">KCADM</span><span class="o">=</span><span class="s2">&quot;/path/to/keycloak/bin/kcadm.sh&quot;</span>
<span class="c1"># in our tutorial</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">KCADM</span><span class="o">=</span><span class="s2">&quot;/opt/keycloak/keycloak-23.0.4/bin/kcadm.sh&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">HOST_FOR_KCADM</span><span class="o">=</span>localhost
</code></pre></div>

<h3 id="installation-en-mode-docker-image">Installation en mode docker image<a class="headerlink" href="#installation-en-mode-docker-image" title="Permanent link">&para;</a></h3>
<p>To install and run Keycloak as a docker container a single command is necessary.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">#  </span>
<span class="nb">export</span><span class="w"> </span><span class="nv">KC_VERSION</span><span class="o">=</span><span class="m">23</span>.0.4

<span class="c1"># create a container</span>
docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:8080<span class="w"> </span>-e<span class="w"> </span><span class="nv">KEYCLOAK_ADMIN</span><span class="o">=</span>admin<span class="w"> </span>-e<span class="w"> </span><span class="nv">KEYCLOAK_ADMIN_PASSWORD</span><span class="o">=</span>admin<span class="w"> </span>quay.io/keycloak/keycloak:<span class="si">${</span><span class="nv">KC_VERSION</span><span class="si">}</span><span class="w"> </span>start-dev
</code></pre></div>

<p>In the next steps we are using the Admin CLI script (kcadm.sh). It is also contained in the Keycloak docker image. 
This means every call of the Admin CLI is executing the script from within the docker image.</p>
<div class="codehilite"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>--entrypoint<span class="w"> </span>/opt/keycloak/bin/kcadm.sh<span class="w"> </span>quay.io/keycloak/keycloak:<span class="si">${</span><span class="nv">KC_VERSION</span><span class="si">}</span>
</code></pre></div>

<p>We define the environment variable KCADM for the above command. Additionally, we mount the <code>$HOME/.keycloak</code> folder 
from the docker host at <code>/opt/.keycloak</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">KCADM</span><span class="o">=</span><span class="s2">&quot;docker run --rm --entrypoint /opt/keycloak/bin/kcadm.sh -v </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/.keycloak:/opt/keycloak/.keycloak quay.io/keycloak/keycloak:</span><span class="si">${</span><span class="nv">KC_VERSION</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># When we executed $KCADM successfully the following output is shown:</span>
Keycloak<span class="w"> </span>Admin<span class="w"> </span>CLI

Use<span class="w"> </span><span class="s1">&#39;kcadm.sh config credentials&#39;</span><span class="w"> </span><span class="nb">command</span><span class="w"> </span>with<span class="w"> </span>username<span class="w"> </span>and<span class="w"> </span>password<span class="w"> </span>to<span class="w"> </span>start<span class="w"> </span>a<span class="w"> </span>session<span class="w"> </span>against<span class="w"> </span>a<span class="w"> </span>specific
server<span class="w"> </span>and<span class="w"> </span>realm.
</code></pre></div>

<p>When executing this script with a command (like config, create, get etc.) it connects to the Keycloak instance running 
in another docker container. Depending on the docker environment you are using, the host name of the Keycloak instance 
must be specified differently. For Docker Desktop environments the host name can be defined as <code>host.docker.internal</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">HOST_FOR_KCADM</span><span class="o">=</span>host.docker.internal
</code></pre></div>

<h2 id="step2-starting-the-keycloak-server">Step2: Starting the keycloak server<a class="headerlink" href="#step2-starting-the-keycloak-server" title="Permanent link">&para;</a></h2>
<h3 id="in-development-mode">In development mode<a class="headerlink" href="#in-development-mode" title="Permanent link">&para;</a></h3>
<p>This mode offers convenient defaults for developers to get the keycloak server up and running quickly. </p>
<div class="codehilite"><pre><span></span><code><span class="c1"># To start in development mode, enter the following command:</span>

bin/kc.<span class="o">[</span>sh<span class="p">|</span>bat<span class="o">]</span><span class="w"> </span>start-dev
</code></pre></div>

<p>You can write a little script to run the service on the background. <strong>Not recommended for the production usage</strong></p>
<div class="codehilite"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">KEYCLOAK_ADMIN</span><span class="o">=</span>admin
<span class="nb">export</span><span class="w"> </span><span class="nv">KEYCLOAK_ADMIN_PASSWORD</span><span class="o">=</span>YVqs7p4bJaim3rQ2FSI8

nohup<span class="w"> </span>path/to/keycloak/bin/kc.sh<span class="w"> </span>start-dev<span class="w"> </span>--http_server_proxy<span class="w"> </span>edge<span class="w">  </span>--hostname-strict<span class="o">=</span><span class="nb">false</span><span class="w"> </span>--hostname<span class="o">=</span>keycloak.casd.local<span class="w"> </span><span class="p">&amp;</span>
</code></pre></div>

<p>Development mode sets the following default configuration:</p>
<ul>
<li>HTTP is enabled</li>
<li>Strict hostname resolution is disabled</li>
<li>Cache is set to local (No distributed cache mechanism used for high availability)</li>
<li>Theme-caching and template-caching is disabled</li>
</ul>
<h3 id="in-production-mode">In production mode<a class="headerlink" href="#in-production-mode" title="Permanent link">&para;</a></h3>
<p>This mode follows a secure by default principle.</p>
<div class="codehilite"><pre><span></span><code>To<span class="w"> </span>start<span class="w"> </span><span class="k">in</span><span class="w"> </span>production<span class="w"> </span>mode,<span class="w"> </span>enter<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>command:

bin/kc.<span class="o">[</span>sh<span class="p">|</span>bat<span class="o">]</span><span class="w"> </span>start
</code></pre></div>

<p>Without further configuration, this command will not start Keycloak and show you an error instead. This response is 
done on purpose, because Keycloak follows a secure by default principle. Production mode expects a hostname to be 
set up and an HTTPS/TLS setup to be available when started.</p>
<p>Production mode sets the following defaults:</p>
<ul>
<li>HTTP is disabled as transport layer security (HTTPS) is essential </li>
<li>Hostname configuration is expected </li>
<li>HTTPS/TLS configuration is expected</li>
</ul>
<p>Before deploying Keycloak in a production environment, make sure to follow the steps outlined in Configuring 
Keycloak for <a href="https://www.keycloak.org/server/configuration-production">production</a>.</p>
<h3 id="creating-the-initial-admin-user">Creating the initial admin user<a class="headerlink" href="#creating-the-initial-admin-user" title="Permanent link">&para;</a></h3>
<p>You can create the initial admin user by using the <code>web frontend</code>, which you access using a local connection 
(localhost). You can instead create this user by using environment variables. Set <code>KEYCLOAK_ADMIN=&lt;username&gt;</code> for 
the initial admin username and <code>KEYCLOAK_ADMIN_PASSWORD=&lt;password&gt;</code> for the initial admin password.</p>
<p>Keycloak parses these values at first startup to create an initial user with administrative rights. Once the first 
user with administrative rights exists, you can use the Admin Console or the command line tool kcadm.[sh|bat] to 
create additional users.</p>
<p>If the initial administrator already exists and the environment variables are still present at startup, an error 
message stating the failed creation of the initial administrator is shown in the logs. Keycloak ignores the 
values and starts up correctly.</p>
<h3 id="optimize-the-keycloak-startup">Optimize the Keycloak startup<a class="headerlink" href="#optimize-the-keycloak-startup" title="Permanent link">&para;</a></h3>
<p>We recommend optimizing Keycloak to provide faster startup and better memory consumption before deploying Keycloak 
in a production environment. </p>
<p>By default, when you use the start or start-dev command, Keycloak runs a build command under the covers for 
convenience reasons.</p>
<p>You can run the build command explicitly. Below are some examples</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># get all build command options </span>
bin/kc.<span class="o">[</span>sh<span class="p">|</span>bat<span class="o">]</span><span class="w"> </span>build<span class="w"> </span>--help

<span class="c1"># Run a build to set the database to PostgreSQL before startup</span>
bin/kc.<span class="o">[</span>sh<span class="p">|</span>bat<span class="o">]</span><span class="w"> </span>

<span class="c1"># below is an example</span>
sudo<span class="w"> </span>./bin/kc.sh<span class="w"> </span>build<span class="w"> </span>--db<span class="o">=</span>postgres<span class="w"> </span>

<span class="c1"># after the build process, you can check the config of the build result</span>
sudo<span class="w"> </span>./bin/kc.sh<span class="w"> </span>show-config
</code></pre></div>

<p>For example, you can add below conf in the <code>conf/keycloak.conf</code> file</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Basic settings for running in production. Change accordingly before deploying the server.</span>

<span class="c1"># Database</span>

<span class="c1"># The database vendor.</span>
<span class="nv">db</span><span class="o">=</span>postgres

<span class="c1"># The username of the database user.</span>
db-username<span class="o">=</span>keycloak

<span class="c1"># The password of the database user.</span>
db-password<span class="o">=</span>changeMe

<span class="c1"># The full database JDBC URL. If not provided, a default URL is set based on the selected database vendor.</span>
db-url<span class="o">=</span>jdbc:postgresql://localhost/keycloak

<span class="c1"># Observability</span>

<span class="c1"># If the server should expose healthcheck endpoints.</span>
<span class="c1">#health-enabled=true</span>

<span class="c1"># If the server should expose metrics endpoints.</span>
<span class="c1">#metrics-enabled=true</span>

<span class="c1"># HTTP</span>

<span class="c1"># The file path to a server certificate or certificate chain in PEM format.</span>
https-certificate-file<span class="o">=</span>/opt/keycloak/keycloak-23.0.4/conf/wildcard-casd.pem

<span class="c1"># The file path to a private key in PEM format.</span>
https-certificate-key-file<span class="o">=</span>/opt/keycloak/keycloak-23.0.4/conf/wildcard-casd.key

<span class="c1"># The http_server_proxy address forwarding mode if the server is behind a reverse http_server_proxy.</span>
<span class="c1">#http_server_proxy=reencrypt</span>

<span class="c1"># Do not attach route to cookies and rely on the session affinity capabilities from reverse http_server_proxy</span>
<span class="c1">#spi-sticky-session-encoder-infinispan-should-attach-route=false</span>

<span class="c1"># Hostname for the Keycloak server.</span>
<span class="nv">hostname</span><span class="o">=</span>keycloak.casd.local
</code></pre></div>

<p>After a successful build, you can start Keycloak and turn off the default startup behavior by entering the following
command:</p>
<div class="codehilite"><pre><span></span><code>bin/kc.<span class="o">[</span>sh<span class="p">|</span>bat<span class="o">]</span><span class="w"> </span>start<span class="w"> </span>--optimized<span class="w"> </span>&lt;configuration-options&gt;
</code></pre></div>

<blockquote>
<p>The <code>--optimized</code> parameter tells Keycloak to assume a pre-built, already optimized Keycloak image is used. As 
a result, Keycloak avoids checking for and running a build directly at startup, which saves time.</p>
</blockquote>
<p>For more information you can visit this page. https://www.keycloak.org/server/configuration</p>
<h2 id="step3-connection-the-admin-cli">Step3 : Connection the admin CLI<a class="headerlink" href="#step3-connection-the-admin-cli" title="Permanent link">&para;</a></h2>
<p>Now we connect the <code>Keycloak Admin CLI</code> to the API and authenticate with the user created previously. We use two 
environment variables created in Step 1:</p>
<ul>
<li>$KCADM</li>
<li>$HOST_FOR_KCADM</li>
</ul>
<p>Please make sure they are defined. Their definition is dependent on the runtime you have chosen.</p>
<p>We log in to the master realm with the admin user. By using the options config credentials we request and maintain an 
authenticated session, which is used for all further calls. Be aware the access and refresh tokens for this session will be stored in the file $HOME/.keycloak/kcadm.config.</p>
<div class="codehilite"><pre><span></span><code><span class="nv">$KCADM</span><span class="w"> </span>config<span class="w"> </span>credentials<span class="w"> </span>--server<span class="w"> </span>http://<span class="nv">$HOST_FOR_KCADM</span>:8080<span class="w"> </span>--user<span class="w"> </span>admin<span class="w"> </span>--password<span class="w"> </span>YVqs7p4bJaim3rQ2FSI8<span class="w"> </span>--realm<span class="w"> </span>master
</code></pre></div>

<p>To check the successful authentication and an authenticated session, we make a first request to the API.</p>
<div class="codehilite"><pre><span></span><code><span class="nv">$KCADM</span><span class="w"> </span>get<span class="w"> </span>serverinfo
</code></pre></div>

<p>The Keycloak server responds with a dump of information about its state and functionality. The same information is 
also available within the Web Admin Console.</p>
<h2 id="step3-creating-a-systemd-service-file-for-keycloak">Step3: Creating a SystemD Service File for Keycloak<a class="headerlink" href="#step3-creating-a-systemd-service-file-for-keycloak" title="Permanent link">&para;</a></h2>
<p>If everythion goes well in step 1 and 2, it means we have a keycloak server ready. To facilitate the keycloak 
service management, Now we will create a systemD service config file.</p>
<h3 id="configuration-directory-for-keycloak">configuration directory for Keycloak<a class="headerlink" href="#configuration-directory-for-keycloak" title="Permanent link">&para;</a></h3>
<p>Create a configuration directory for Keycloak under /etc directory by the name keycloak.</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/etc/
$<span class="w"> </span>sudo<span class="w"> </span>mkdir<span class="w"> </span>keycloak
</code></pre></div>

<p>The keycloak distribution contains a default config template which locate at <code>/path/to/keycloak/conf/keycloak.conf</code> 
We can use it as our start point, so copy it to  <code>/etc/keycloak/</code> and rename it to keycloak.conf</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># in our example, our keycloak path is /opt/keycloak/keycloak-23.0.4</span>
sudo<span class="w"> </span>cp<span class="w"> </span>/opt/keycloak/keycloak-23.0.4/conf/keycloak.conf<span class="w"> </span>/etc/keycloak/keycloak.conf
</code></pre></div>

<h2 id="create-a-systemd-service-for-keycloak">Create a systemd service for keycloak<a class="headerlink" href="#create-a-systemd-service-for-keycloak" title="Permanent link">&para;</a></h2>
<p>If you followed the above tutorial, you should have one keycloak server on mode bare-metal ready to run.</p>
<p>To do a test run, you can use the below command.</p>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>./bin/kc.sh<span class="w"> </span>start<span class="w"> </span>--http_server_proxy<span class="w"> </span>edge<span class="w"> </span>--hostname-strict<span class="o">=</span><span class="nb">false</span><span class="w"> </span>--http-port<span class="o">=</span><span class="m">8080</span><span class="w"> </span>--log<span class="o">=</span>file<span class="w"> </span>--log-file<span class="o">=</span>/var/log/keycloak/keycloak.log
</code></pre></div>

<p>You can also create a systemd daemon to better control the keycloak service. </p>
<div class="codehilite"><pre><span></span><code># Create a file
sudo vim /etc/systemd/system/keycloak.service

# put the below content
[Unit]
Description=Keycloak Server
After=syslog.target network.target
Wants=network.target

[Service]
Type=notify
AmbientCapabilities=CAP_SYS_ADMIN
User=keycloak
Group=keycloak
Environment=JAVA_HOME=/usr/lib/jvm/java-1.17.0-openjdk-amd64
# this needs to be reviewed in production env
ExecStart=/opt/keycloak/current/bin/kc.sh start --proxy edge --hostname-strict=false --http-port=8080 --log=file --log-file=/var/log/keycloak/keycloak.log

[Install]
WantedBy=multi-user.target
</code></pre></div>

<p>You can now control the keycloak daemon with systemd</p>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>start/status/stop/restart<span class="w"> </span>keycloak
</code></pre></div>

<h2 id="set-a-reverse-proxy">Set a reverse proxy<a class="headerlink" href="#set-a-reverse-proxy" title="Permanent link">&para;</a></h2>
<p>In this tutorial, I used nginx, you can use other product. Below is a nginx server config example. This works fine
with direct grant request. If you use an app to integrate keycloak, you may encounter the 
<strong>CORS header 'Access-Control-Allow-Origin' missing</strong> issue. To resolve this issue, you need to modify the 
below config to add <code>Access-Control-Allow-Origin</code> in the http response header. For more details, check</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># set a backend upstream for keycloak server</span>
upstream<span class="w"> </span>keycloak_backend<span class="w"> </span><span class="o">{</span>
<span class="w">    </span>server<span class="w"> </span><span class="m">127</span>.0.0.1:8080<span class="w"> </span><span class="nv">fail_timeout</span><span class="o">=</span><span class="m">0</span><span class="p">;</span>
<span class="o">}</span>

server<span class="w"> </span><span class="o">{</span>
<span class="w">  </span>listen<span class="w"> </span><span class="m">80</span><span class="p">;</span>
<span class="w">  </span>server_name<span class="w"> </span>keycloak.casd.local<span class="p">;</span>

<span class="w">  </span><span class="c1"># Redirect all traffic to SSL</span>
<span class="w">  </span>rewrite<span class="w"> </span>^<span class="w"> </span>https://<span class="nv">$host$request_uri</span>?<span class="w"> </span>permanent<span class="p">;</span>
<span class="o">}</span>

server<span class="w"> </span><span class="o">{</span>
<span class="w">  </span>listen<span class="w"> </span><span class="m">443</span><span class="w"> </span>ssl<span class="w"> </span>default_server<span class="p">;</span>

<span class="w">  </span><span class="c1"># enables SSLv3/TLSv1, but not SSLv2 which is weak and should no longer be used.</span>
<span class="w">  </span>ssl_protocols<span class="w"> </span>SSLv3<span class="w"> </span>TLSv1<span class="w"> </span>TLSv1.1<span class="w"> </span>TLSv1.2<span class="w"> </span>TLSv1.3<span class="p">;</span>

<span class="w">  </span><span class="c1"># disables all weak ciphers</span>
<span class="w">  </span>ssl_ciphers<span class="w"> </span>ALL:!aNULL:!ADH:!eNULL:!LOW:!EXP:RC4+RSA:+HIGH:+MEDIUM<span class="p">;</span>

<span class="w">  </span>server_name<span class="w"> </span>keycloak.casd.local<span class="p">;</span>

<span class="w">  </span><span class="c1">## Access and error logs.</span>
<span class="w">  </span>access_log<span class="w"> </span>/var/log/nginx/access.log<span class="p">;</span>
<span class="w">  </span>error_log<span class="w">  </span>/var/log/nginx/error.log<span class="w"> </span>info<span class="p">;</span>

<span class="w">  </span><span class="c1">## Keep alive timeout set to a greater value for SSL/TLS.</span>
<span class="w">  </span>keepalive_timeout<span class="w"> </span><span class="m">75</span><span class="w"> </span><span class="m">75</span><span class="p">;</span>

<span class="w">  </span><span class="c1">## See the keepalive_timeout directive in nginx.conf.</span>
<span class="w">  </span><span class="c1">## Server certificate and key.</span>
<span class="w">  </span>ssl_certificate<span class="w"> </span>/opt/keycloak/keycloak-23.0.4/conf/wildcard-casd.pem<span class="p">;</span>
<span class="w">  </span>ssl_certificate_key<span class="w"> </span>/opt/keycloak/keycloak-23.0.4/conf/wildcard-casd.key<span class="p">;</span>
<span class="w">  </span>ssl_session_timeout<span class="w">  </span>5m<span class="p">;</span>

<span class="w">  </span><span class="c1">## Strict Transport Security header for enhanced security. See</span>
<span class="w">  </span><span class="c1">## http://www.chromium.org/sts. I&#39;ve set it to 2 hours; set it to</span>
<span class="w">  </span><span class="c1">## whichever age you want.</span>

<span class="w">  </span>location<span class="w"> </span>/<span class="w"> </span><span class="o">{</span>
<span class="w">        </span>proxy_set_header<span class="w"> </span>Host<span class="w"> </span><span class="nv">$host</span><span class="p">;</span>
<span class="w">        </span>proxy_set_header<span class="w"> </span>X-Forwarded-Host<span class="w"> </span><span class="nv">$host</span><span class="p">;</span>
<span class="w">        </span>proxy_set_header<span class="w"> </span>X-Forwarded-Server<span class="w"> </span><span class="nv">$host</span><span class="p">;</span>
<span class="w">        </span>proxy_set_header<span class="w"> </span>X-Forwarded-Port<span class="w"> </span><span class="nv">$mapped_server_port</span><span class="p">;</span>
<span class="w">        </span>proxy_set_header<span class="w"> </span>X-Real-IP<span class="w"> </span><span class="nv">$remote_addr</span><span class="p">;</span>
<span class="w">        </span>proxy_set_header<span class="w"> </span>X-Forwarded-For<span class="w"> </span><span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span>
<span class="w">        </span>proxy_set_header<span class="w"> </span>X-Forwarded-Proto<span class="w"> </span><span class="nv">$scheme</span><span class="p">;</span>
<span class="w">        </span>proxy_pass<span class="w"> </span>http://keycloak_backend<span class="p">;</span>
<span class="w">    </span><span class="o">}</span>

<span class="o">}</span>
</code></pre></div>

<h2 id="testing-the-keycloak-service">Testing the keycloak service<a class="headerlink" href="#testing-the-keycloak-service" title="Permanent link">&para;</a></h2>
<h3 id="set-up-keycloak-client">Set up keycloak client<a class="headerlink" href="#set-up-keycloak-client" title="Permanent link">&para;</a></h3>
<ol>
<li>Create a new realm(e.g. Data-catalog)</li>
<li>Create a client inside the realm which you just created (e.g. open-metadata )</li>
<li>In the <code>Capability config/Authentication flow</code> section, select two options <code>standard flow</code>, and <code>direct access grants</code></li>
<li>In the <code>Capability config/Client authentication</code> section, enable it. This will set up a password for the <code>open-metadata</code> client</li>
<li>Get the password from the <code>credentials</code> Tab.</li>
</ol>
<h3 id="get-an-access-token">Get an access token<a class="headerlink" href="#get-an-access-token" title="Permanent link">&para;</a></h3>
<p>This curl command will get a token from the <code>open-metadata</code> client in realm <code>Data-catalog</code>(generated by keycloak server).</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># </span>
curl<span class="w"> </span>-k<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>https://keycloak.casd.local/realms/Data-catalog/protocol/openid-connect/token<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s1">&#39;Content-Type: application/x-www-form-urlencoded&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s1">&#39;Accept: application/json&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s1">&#39;grant_type=password&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s1">&#39;client_id=open-metadata&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s1">&#39;client_secret=HZDISp4LEuLL96ozs6cN2p4HftHKY62P&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s1">&#39;scope=openid&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s1">&#39;username=jsnow&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s1">&#39;password=jsnow&#39;</span>
</code></pre></div>

<h3 id="verify-user-access-token">Verify User access token<a class="headerlink" href="#verify-user-access-token" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code>curl<span class="w"> </span>-k<span class="w"> </span>-X<span class="w"> </span>GET<span class="w"> </span>https://keycloak.casd.local/realms/Data-catalog/protocol/openid-connect/userinfo<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s1">&#39;Content-Type: application/x-www-form-urlencoded&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s1">&#39;Authorization: Bearer &lt;access-token&gt;&#39;</span>
</code></pre></div>

<blockquote>
<p>If your token is not valid, you will not receive the user info. If everything goes well, you will have the below 
response</p>
</blockquote>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;sub&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d0618826-8b2f-4853-a216-5b342d2c0452&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;email_verified&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John Snow&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;preferred_username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;jsnow&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;given_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;family_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Snow&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;jsnow@casd.local&quot;</span>
<span class="p">}</span>
</code></pre></div>

<p>Below are some useful urls</p>
<div class="codehilite"><pre><span></span><code>#<span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">get</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">realm</span><span class="w"> </span><span class="nv">configuration</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">below</span><span class="w"> </span><span class="nv">url</span>
<span class="nv">https</span>:<span class="o">//</span><span class="nv">keycloak</span>.<span class="nv">casd</span>.<span class="nv">local</span><span class="o">/</span><span class="nv">realms</span><span class="o">/</span><span class="nv">Data</span><span class="o">-</span><span class="nv">catalog</span><span class="o">/</span>.<span class="nv">well</span><span class="o">-</span><span class="nv">known</span><span class="o">/</span><span class="nv">openid</span><span class="o">-</span><span class="nv">configuration</span>

#<span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">get</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">token</span><span class="w"> </span><span class="nv">endpoint</span>
<span class="nv">https</span>:<span class="o">//</span><span class="nv">keycloak</span>.<span class="nv">casd</span>.<span class="nv">local</span><span class="o">/</span><span class="nv">realms</span><span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">protocol</span><span class="o">/</span><span class="nv">openid</span><span class="o">-</span><span class="k">connect</span><span class="o">/</span><span class="nv">token</span>
</code></pre></div>

<h3 id="use-postman-to-test-the-above-request">Use postman to test the above request<a class="headerlink" href="#use-postman-to-test-the-above-request" title="Permanent link">&para;</a></h3>
<ol>
<li>Create a new collection <code>keycloak API test</code></li>
<li>Create a request <code>Get keycloak access token</code>, this will simulate the first curl request</li>
<li>In <code>Get keycloak access token</code>, In http method, choose <code>POST</code>, in url, put <code>https://keycloak.casd.local/realms/Data-catalog/protocol/openid-connect/token</code>
   In <code>Headers</code>, add two row <code>Content-Type:application/x-www-form-urlencoded</code>, <code>Accept:application/json</code>. In <code>Body</code>,
   add the below rows <code>grant_type:password client_id:open-metadata client_secret:changeMe scope:openid username:jsnow password:jsnow</code></li>
<li>Copy the access token in the response body</li>
<li>Create a new request <code>Verify keycloak access token</code></li>
<li>In http method, choose <code>GET</code>, in url, put <code>https://keycloak.casd.local/realms/Data-catalog/protocol/openid-connect/userinfo</code>
   In <code>Authorization</code>, in <code>Type</code> choose <code>Bearer token</code>, Copy the access token in Token input line.</li>
<li>After sending the request, you should receive the repose with user profile</li>
</ol>
<blockquote>
<p>The default access token is only valid for 5 mins, so it's normal your token is no longer valid after 5 mins. You can
 Change this in Keycloak -&gt; realm settings -&gt; token</p>
</blockquote>
<h2 id="troubleshoot">Troubleshoot<a class="headerlink" href="#troubleshoot" title="Permanent link">&para;</a></h2>
<h3 id="css-loading-issue-after-hosting-keycloak-on-linux-with-nginx-as-proxy-server">CSS loading issue after hosting keycloak on linux with nginx as proxy server<a class="headerlink" href="#css-loading-issue-after-hosting-keycloak-on-linux-with-nginx-as-proxy-server" title="Permanent link">&para;</a></h3>
<p>https://github.com/keycloak/keycloak/issues/12719</p>
<h3 id="cors-header-access-control-allow-origin-missing">CORS header 'Access-Control-Allow-Origin' missing<a class="headerlink" href="#cors-header-access-control-allow-origin-missing" title="Permanent link">&para;</a></h3>
<p>You can find more info about this issue here: https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS/Errors/CORSMissingAllowOrigin</p>
<p>You can also check this page https://www.stackhawk.com/blog/react-cors-guide-what-it-is-and-how-to-enable-it/</p>
<p>The response to the CORS request is missing the required Access-Control-Allow-Origin header, which is used to determine 
whether the resource can be accessed by content operating within the current origin.</p>
<p>To correct this issue, you need to add the appropriate <code>Access-Control-Allow-Origin</code> values into the HTTP header.</p>
<p>In this tutorial, we used the nginx as our reverse proxy. The below lines show a possible config for nginx. The idea is
the nginx server checks the <code>origin value of the http request header</code>. Base on this value, it will set 
the <code>Access-Control-Allow-Origin</code> on the http response header.</p>
<div class="codehilite"><pre><span></span><code># set default values for the cors values 
  set $cors_origin &quot;&quot;;
  set $cors_cred   true;
  set $cors_header &quot;Content-Type&quot;;
  set $cors_method &quot;POST, GET&quot;;

# if requests comes from the allowed domain or subdomain, we assign certain core values 
# nginx create variables for http header, for example the origin header has the equivalent variable $http_origin in nginx 
  if ($http_origin ~* (https?://.*\.mckinsey\.com(:[0-9]+)?$)) {
            set $cors_origin $http_origin;
            set $cors_cred   true;
            set $cors_header $http_access_control_request_headers;
            set $cors_method $http_access_control_request_method;
  }

# if request comes from null origin, we set another group of core values
 if ($http_origin ~ &#39;null&#39;) {
            set $cors_origin &quot;null&quot;;
            set $cors_cred   true;
            set $cors_header $http_access_control_request_headers;
            set $cors_method $http_access_control_request_method;
  }

# add header to the Http response
  add_header Access-Control-Allow-Origin      $cors_origin;
  add_header Access-Control-Allow-Credentials $cors_cred;
  add_header Access-Control-Allow-Headers     $cors_header;
  add_header Access-Control-Allow-Methods     $cors_method;

  location / {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header Host $http_host;
        proxy_pass http://keycloak_backend;
    }
</code></pre></div>

<h3 id="bash-script-to-test-authorization-code-grant-of-keycloak">Bash script to test Authorization Code grant of Keycloak<a class="headerlink" href="#bash-script-to-test-authorization-code-grant-of-keycloak" title="Permanent link">&para;</a></h3>
<p>This following script expects <code>KEYCLOAK_URL</code>, <code>REDIRECT_URL</code> (it is the client application URL, in this case 
it can be any URL), <code>REALM</code> (Keycloak realm), <code>CLIENTID</code> (client application created in Keycloak) and the <code>USERNAME</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># This script will perform the following steps:</span>
<span class="c1">#</span>
<span class="c1"># 1. Initialize variables and functions.</span>
<span class="c1"># 2. Prompt for the user&#39;s password.</span>
<span class="c1"># 3. Obtain the authentication URL from Keycloak.</span>
<span class="c1"># 4. Send username and password to Keycloak to receive a code URL.</span>
<span class="c1"># 5. Extract the code from the received URL.</span>
<span class="c1"># 6. Send the code to Keycloak to receive the Access Token.</span>
<span class="c1"># 7. Decode and display the Access Token.</span>
<span class="c1"># 8. Clean up the cookie file used for authentication.</span>

<span class="c1"># Initialize variables</span>
init<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nv">KEYCLOAK_URL</span><span class="o">=</span><span class="s2">&quot;https://keycloak.casd.local&quot;</span>
<span class="w">    </span><span class="nv">REDIRECT_URL</span><span class="o">=</span><span class="s2">&quot;http://localhost:8080&quot;</span>
<span class="w">    </span><span class="nv">USERNAME</span><span class="o">=</span><span class="s2">&quot;jsnow&quot;</span>
<span class="w">    </span><span class="nv">REALM</span><span class="o">=</span><span class="s2">&quot;Data-catalog&quot;</span>
<span class="w">    </span><span class="nv">CLIENTID</span><span class="o">=</span><span class="s2">&quot;open-metadata&quot;</span>
<span class="o">}</span>

<span class="c1"># Function to decode the access token</span>
decode<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span>jq<span class="w"> </span>-R<span class="w"> </span><span class="s1">&#39;split(&quot;.&quot;) | .[1] | @base64d | fromjson&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Prompt for password</span>
<span class="nb">read</span><span class="w"> </span>-rp<span class="w"> </span><span class="s2">&quot;Password: &quot;</span><span class="w"> </span>-s<span class="w"> </span>PASSWORD
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot; &quot;</span>

<span class="c1"># Initialize</span>
init

<span class="c1"># Cookie file path</span>
<span class="nv">COOKIE</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">/cookie.jar&quot;</span>

<span class="c1"># Step 1: Obtain the authentication URL</span>
<span class="nv">AUTHENTICATE_URL</span><span class="o">=</span><span class="k">$(</span>curl<span class="w"> </span>-sSL<span class="w"> </span>--get<span class="w"> </span>--cookie<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$COOKIE</span><span class="s2">&quot;</span><span class="w"> </span>--cookie-jar<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$COOKIE</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--data-urlencode<span class="w"> </span><span class="s2">&quot;client_id=</span><span class="si">${</span><span class="nv">CLIENTID</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--data-urlencode<span class="w"> </span><span class="s2">&quot;redirect_uri=</span><span class="si">${</span><span class="nv">REDIRECT_URL</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--data-urlencode<span class="w"> </span><span class="s2">&quot;scope=openid&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--data-urlencode<span class="w"> </span><span class="s2">&quot;response_type=code&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="s2">&quot;</span><span class="nv">$KEYCLOAK_URL</span><span class="s2">/realms/</span><span class="nv">$REALM</span><span class="s2">/protocol/openid-connect/auth&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>pup<span class="w"> </span><span class="s2">&quot;form#kc-form-login attr{action}&quot;</span><span class="k">)</span>

<span class="c1"># Convert &amp;amp; to &amp;</span>
<span class="nv">AUTHENTICATE_URL</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$AUTHENTICATE_URL</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/\&amp;amp;/\&amp;/g&#39;</span><span class="k">)</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Sending Username Password to the following authentication URL of Keycloak: </span><span class="nv">$AUTHENTICATE_URL</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot; &quot;</span>

<span class="c1"># Step 2: Obtain the code URL</span>
<span class="nv">CODE_URL</span><span class="o">=</span><span class="k">$(</span>curl<span class="w"> </span>-sS<span class="w"> </span>--cookie<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$COOKIE</span><span class="s2">&quot;</span><span class="w"> </span>--cookie-jar<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$COOKIE</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--data-urlencode<span class="w"> </span><span class="s2">&quot;username=</span><span class="nv">$USERNAME</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--data-urlencode<span class="w"> </span><span class="s2">&quot;password=</span><span class="nv">$PASSWORD</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--write-out<span class="w"> </span><span class="s2">&quot;%{REDIRECT_URL}&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="s2">&quot;</span><span class="nv">$AUTHENTICATE_URL</span><span class="s2">&quot;</span><span class="k">)</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Following URL with code received from Keycloak: </span><span class="nv">$CODE_URL</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot; &quot;</span>

<span class="c1"># Extract code from URL</span>
<span class="nv">code</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$CODE_URL</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span>-F<span class="w"> </span><span class="s2">&quot;code=&quot;</span><span class="w"> </span><span class="s1">&#39;{print $2}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $1}&#39;</span><span class="k">)</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Extracted code: </span><span class="nv">$code</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot; &quot;</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Sending code=</span><span class="nv">$code</span><span class="s2"> to Keycloak to receive Access token&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot; &quot;</span>

<span class="c1"># Step 3: Obtain the Access Token</span>
<span class="nv">ACCESS_TOKEN</span><span class="o">=</span><span class="k">$(</span>curl<span class="w"> </span>-sS<span class="w"> </span>--cookie<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$COOKIE</span><span class="s2">&quot;</span><span class="w"> </span>--cookie-jar<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$COOKIE</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--data-urlencode<span class="w"> </span><span class="s2">&quot;client_id=</span><span class="nv">$CLIENTID</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--data-urlencode<span class="w"> </span><span class="s2">&quot;redirect_uri=</span><span class="nv">$REDIRECT_URL</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--data-urlencode<span class="w"> </span><span class="s2">&quot;code=</span><span class="nv">$code</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--data-urlencode<span class="w"> </span><span class="s2">&quot;grant_type=authorization_code&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="s2">&quot;</span><span class="nv">$KEYCLOAK_URL</span><span class="s2">/realms/</span><span class="nv">$REALM</span><span class="s2">/protocol/openid-connect/token&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-r<span class="w"> </span><span class="s2">&quot;.access_token&quot;</span><span class="k">)</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot; &quot;</span>

<span class="c1"># Print decoded Access Token</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Decoded Access Token: &quot;</span>
decode<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$ACCESS_TOKEN</span><span class="s2">&quot;</span>

<span class="c1"># Clean up the cookie file</span>
rm<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$COOKIE</span><span class="s2">&quot;</span>
</code></pre></div>

<blockquote>
<p>you can find the above bash script in ./src/keycloak/keycloak_auth_code.bash</p>
</blockquote>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.instant", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>